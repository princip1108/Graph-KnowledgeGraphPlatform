<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>登录注册 - GraphWisdom智汇星图</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/login-register.css}">
    </th:block>
</head>

<body>
    <div layout:fragment="content">
        <!-- Main Content -->
        <div class="flex-1 flex items-center justify-center py-16 px-4">
            <div class="w-full max-w-md">
                <div class="card bg-base-100 shadow-xl border academic-border">
                    <div class="card-body p-8">
                        <!-- Return Home Button -->
                        <div class="flex justify-start mb-6">
                            <a th:href="@{/graph/home.html}"
                                class="btn btn-ghost btn-sm gap-2 text-base-content/70 hover:text-base-content nav-hover">
                                <span class="iconify" data-icon="heroicons:arrow-left" data-width="16"></span>
                                返回首页
                            </a>
                        </div>

                        <!-- Tab Navigation -->
                        <div class="tabs tabs-boxed mb-8 bg-base-200">
                            <a id="loginTab" class="tab tab-active" onclick="switchTab('login')">登录</a>
                            <a id="registerTab" class="tab" onclick="switchTab('register')">注册</a>
                        </div>

                        <!-- Login Form -->
                        <div id="loginForm" class="space-y-6">
                            <div class="text-center mb-6">
                                <h2 class="text-2xl font-bold text-base-content">欢迎回来</h2>
                                <p class="text-base-content/70 mt-2">登录您的账户以继续使用</p>
                            </div>

                            <!-- Social Login -->
                            <div class="space-y-3">
                                <button class="btn btn-outline w-full gap-3 hover-lift"
                                    onclick="handleSocialLogin('wechat')">
                                    <div class="w-5 h-5 bg-green-500 rounded flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                            fill="white">
                                            <path
                                                d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.328.328 0 0 0 .186-.059l2.114-1.225a.866.866 0 0 1 .446-.126.79.79 0 0 1 .214.03 10.07 10.07 0 0 0 2.664.35c.32 0 .636-.02.95-.05a5.6 5.6 0 0 1-.201-1.478c0-3.449 3.382-6.254 7.558-6.254.146 0 .29.007.434.017C16.752 4.842 13.027 2.188 8.69 2.188zm-2.85 4.76a.96.96 0 1 1 0 1.92.96.96 0 0 1 0-1.92zm5.12 0a.96.96 0 1 1 0 1.92.96.96 0 0 1 0-1.92zm5.849 3.32c-3.602 0-6.528 2.418-6.528 5.4 0 2.98 2.926 5.4 6.528 5.4.71 0 1.394-.093 2.038-.262.052-.015.107-.023.162-.023a.67.67 0 0 1 .345.098l1.636.947a.254.254 0 0 0 .144.046.227.227 0 0 0 .224-.229c0-.056-.023-.11-.037-.164l-.301-1.146a.456.456 0 0 1 .165-.515C22.862 18.778 24 17.167 24 15.27c0-2.983-2.926-5.402-6.528-5.402h-.662zM14.18 14.1a.74.74 0 1 1 0 1.48.74.74 0 0 1 0-1.48zm3.952 0a.74.74 0 1 1 0 1.48.74.74 0 0 1 0-1.48z" />
                                        </svg>
                                    </div>
                                    <span>微信登录</span>
                                    <div class="badge badge-primary badge-sm">推荐</div>
                                </button>
                                <button class="btn btn-outline w-full gap-3 hover-lift"
                                    onclick="handleSocialLogin('github')">
                                    <div class="w-5 h-5 bg-gray-900 rounded flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                            fill="white">
                                            <path
                                                d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z" />
                                        </svg>
                                    </div>
                                    <span>GitHub登录</span>
                                </button>
                            </div>

                            <div class="divider text-base-content/50 academic-divider">或使用账号密码</div>

                            <!-- Login Form Fields -->
                            <form class="space-y-4" onsubmit="handleLogin(event)">
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">邮箱或手机号</span>
                                    </label>
                                    <input id="login-account" type="text" placeholder="请输入邮箱或手机号" required
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">密码</span>
                                    </label>
                                    <input id="login-password" type="password" placeholder="请输入密码" required
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="flex items-center justify-between">
                                    <label class="label cursor-pointer gap-2">
                                        <input type="checkbox" class="checkbox checkbox-primary checkbox-sm">
                                        <span class="label-text text-sm">记住我</span>
                                    </label>
                                    <a th:href="@{/user/password_reset.html}" class="link link-primary text-sm">忘记密码？</a>
                                </div>
                                <button type="submit" class="btn btn-primary w-full hover-lift">
                                    <span class="iconify" data-icon="heroicons:arrow-right-on-rectangle"
                                        data-width="16"></span>
                                    登录
                                </button>
                            </form>
                        </div>

                        <!-- Register Form -->
                        <div id="registerForm" class="space-y-6 hidden">
                            <div class="text-center mb-6">
                                <h2 class="text-2xl font-bold text-base-content">创建账户</h2>
                                <p class="text-base-content/70 mt-2">加入我们，开始探索知识图谱</p>
                            </div>

                            <!-- Social Register -->
                            <div class="space-y-3">
                                <button class="btn btn-outline w-full gap-3 hover-lift"
                                    onclick="handleSocialLogin('wechat')">
                                    <div class="w-5 h-5 bg-green-500 rounded flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                            fill="white">
                                            <path
                                                d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.328.328 0 0 0 .186-.059l2.114-1.225a.866.866 0 0 1 .446-.126.79.79 0 0 1 .214.03 10.07 10.07 0 0 0 2.664.35c.32 0 .636-.02.95-.05a5.6 5.6 0 0 1-.201-1.478c0-3.449 3.382-6.254 7.558-6.254.146 0 .29.007.434.017C16.752 4.842 13.027 2.188 8.69 2.188zm-2.85 4.76a.96.96 0 1 1 0 1.92.96.96 0 0 1 0-1.92zm5.12 0a.96.96 0 1 1 0 1.92.96.96 0 0 1 0-1.92zm5.849 3.32c-3.602 0-6.528 2.418-6.528 5.4 0 2.98 2.926 5.4 6.528 5.4.71 0 1.394-.093 2.038-.262.052-.015.107-.023.162-.023a.67.67 0 0 1 .345.098l1.636.947a.254.254 0 0 0 .144.046.227.227 0 0 0 .224-.229c0-.056-.023-.11-.037-.164l-.301-1.146a.456.456 0 0 1 .165-.515C22.862 18.778 24 17.167 24 15.27c0-2.983-2.926-5.402-6.528-5.402h-.662zM14.18 14.1a.74.74 0 1 1 0 1.48.74.74 0 0 1 0-1.48zm3.952 0a.74.74 0 1 1 0 1.48.74.74 0 0 1 0-1.48z" />
                                        </svg>
                                    </div>
                                    <span>微信注册</span>
                                    <div class="badge badge-primary badge-sm">快速</div>
                                </button>
                                <button class="btn btn-outline w-full gap-3 hover-lift"
                                    onclick="handleSocialLogin('github')">
                                    <div class="w-5 h-5 bg-gray-900 rounded flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                            fill="white">
                                            <path
                                                d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z" />
                                        </svg>
                                    </div>
                                    <span>GitHub注册</span>
                                </button>
                            </div>

                            <div class="divider text-base-content/50 academic-divider">或手动注册</div>

                            <!-- Register Form Fields -->
                            <form class="space-y-4" onsubmit="handleRegister(event)">
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">用户名</span>
                                    </label>
                                    <input id="reg-username" type="text" placeholder="请输入用户名" required
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">邮箱地址</span>
                                        <span class="label-text-alt text-base-content/50">选填</span>
                                    </label>
                                    <input id="reg-email" type="email" placeholder="请输入邮箱地址"
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">手机号码</span>
                                        <span class="label-text-alt text-base-content/50">邮箱和手机至少填一个</span>
                                    </label>
                                    <input id="reg-phone" type="tel" placeholder="请输入手机号码"
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">设置密码</span>
                                    </label>
                                    <input id="reg-password" type="password" placeholder="请设置密码（8位以上）" required
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label">
                                        <span class="label-text">确认密码</span>
                                    </label>
                                    <input id="reg-confirm-password" type="password" placeholder="请再次输入密码" required
                                        class="input input-bordered w-full focus-primary">
                                </div>
                                <div class="form-control">
                                    <label class="label cursor-pointer justify-start gap-3">
                                        <input type="checkbox" required class="checkbox checkbox-primary checkbox-sm">
                                        <span class="label-text text-sm">
                                            我已阅读并同意
                                            <a href="#" class="link link-primary">用户协议</a>
                                            和
                                            <a href="#" class="link link-primary">隐私政策</a>
                                        </span>
                                    </label>
                                </div>
                                <button type="submit" class="btn btn-primary w-full hover-lift">
                                    <span class="iconify" data-icon="heroicons:user-plus" data-width="16"></span>
                                    注册账户
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <th:block layout:fragment="js">
        <script th:src="@{/js/login-register.js}"></script>
    </th:block>
</body>

</html>
