<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/base}">

<head>
    <title>知识图谱探索</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/graph-list.css}">
    </th:block>
</head>

<body>
    <div layout:fragment="content">
        <!-- Header Section -->
        <section class="bg-base-100 py-16 px-4">
            <div class="container mx-auto max-w-6xl text-center">
                <h1 class="text-4xl font-bold text-base-content mb-4">知识图谱探索</h1>
                <p class="text-lg text-base-content/70 mb-8">在这里发现和探索海量的知识图谱，助您洞察数据背后的关联与价值。</p>
                <div class="flex justify-center">
                    <div class="join w-full max-w-md search-container">
                        <input type="text" placeholder="搜索知识图谱..." id="searchInput"
                            class="input input-bordered join-item w-full focus-primary">
                        <button class="btn btn-primary join-item" onclick="performSearch()">
                            <span class="iconify" data-icon="heroicons:magnifying-glass" data-width="20"></span>
                        </button>
                        <div id="searchSuggestions" class="search-suggestions hidden"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter and List Section -->
        <section class="py-8 px-4">
            <div class="container mx-auto max-w-7xl">
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Left Sidebar - Filters -->
                    <div class="lg:w-80 flex-shrink-0">
                        <div class="card bg-base-100 shadow-soft">
                            <div class="card-body p-4">
                                <div class="space-y-4">
                                    <!-- Basic Filter -->
                                    <div class="filter-group">
                                        <div class="collapse collapse-open bg-base-200/50 rounded-lg">
                                            <input type="checkbox" checked class="collapse-toggle">
                                            <div class="collapse-title text-sm font-medium px-4 py-2 min-h-0">
                                                <span class="iconify" data-icon="heroicons:funnel"
                                                    data-width="16"></span>
                                                基础筛选
                                            </div>
                                            <div class="collapse-content px-4 pb-4">
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:squares-2x2"
                                                            data-width="16"></span>
                                                        领域分类
                                                    </h4>
                                                    <div class="grid grid-cols-2 gap-1">
                                                        <button data-filter="all"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn active"
                                                            onclick="filterGraphs('all')">
                                                            <span class="iconify" data-icon="heroicons:squares-2x2"
                                                                data-width="12"></span>全部
                                                        </button>
                                                        <button data-filter="humanities"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('humanities')">
                                                            <span class="iconify" data-icon="heroicons:book-open"
                                                                data-width="12"></span>人文
                                                        </button>
                                                        <button data-filter="history"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('history')">
                                                            <span class="iconify" data-icon="heroicons:clock"
                                                                data-width="12"></span>历史
                                                        </button>
                                                        <button data-filter="science"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('science')">
                                                            <span class="iconify" data-icon="heroicons:beaker"
                                                                data-width="12"></span>科学
                                                        </button>
                                                        <button data-filter="technology"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('technology')">
                                                            <span class="iconify" data-icon="heroicons:cpu-chip"
                                                                data-width="12"></span>技术
                                                        </button>
                                                        <button data-filter="medicine"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('medicine')">
                                                            <span class="iconify" data-icon="heroicons:heart"
                                                                data-width="12"></span>医学
                                                        </button>
                                                        <button data-filter="economics"
                                                            class="btn btn-ghost btn-xs justify-start filter-btn"
                                                            onclick="filterGraphs('economics')">
                                                            <span class="iconify" data-icon="heroicons:chart-bar"
                                                                data-width="12"></span>经济
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:magnifying-glass"
                                                            data-width="16"></span>
                                                        关键词筛选
                                                    </h4>
                                                    <input type="text" placeholder="输入关键词..." id="keywordFilter"
                                                        class="input input-bordered input-xs w-full focus-primary">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Structure Filter -->
                                    <div class="filter-group">
                                        <div class="collapse bg-base-200/50 rounded-lg">
                                            <input type="checkbox" class="collapse-toggle">
                                            <div class="collapse-title text-sm font-medium px-4 py-2 min-h-0">
                                                <span class="iconify" data-icon="heroicons:chart-bar-square"
                                                    data-width="16"></span>
                                                图谱结构
                                            </div>
                                            <div class="collapse-content px-4 pb-4">
                                                <!-- 节点数量筛选 -->
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:circle"
                                                            data-width="14"></span>
                                                        节点数量
                                                    </h4>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最小节点数</span><span
                                                                id="minNodesValue"
                                                                class="label-text-alt text-xs">0</span></label>
                                                        <input type="range" min="0" max="10000" value="0"
                                                            id="minNodesRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最大节点数</span><span
                                                                id="maxNodesValue"
                                                                class="label-text-alt text-xs">10000</span></label>
                                                        <input type="range" min="0" max="10000" value="10000"
                                                            id="maxNodesRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                </div>
                                                <!-- 关系数筛选 -->
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:arrow-right"
                                                            data-width="14"></span>
                                                        关系数
                                                    </h4>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最小关系数</span><span
                                                                id="minEdgesValue"
                                                                class="label-text-alt text-xs">0</span></label>
                                                        <input type="range" min="0" max="20000" value="0"
                                                            id="minEdgesRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最大关系数</span><span
                                                                id="maxEdgesValue"
                                                                class="label-text-alt text-xs">20000</span></label>
                                                        <input type="range" min="0" max="20000" value="20000"
                                                            id="maxEdgesRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                </div>
                                                <!-- 图谱密度筛选 -->
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:squares-plus"
                                                            data-width="14"></span>
                                                        图谱密度
                                                    </h4>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最小密度</span><span
                                                                id="minDensityValue"
                                                                class="label-text-alt text-xs">0.0</span></label>
                                                        <input type="range" min="0" max="100" value="0"
                                                            id="minDensityRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this, 'decimal')">
                                                    </div>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最大密度</span><span
                                                                id="maxDensityValue"
                                                                class="label-text-alt text-xs">10.0</span></label>
                                                        <input type="range" min="0" max="100" value="100"
                                                            id="maxDensityRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this, 'decimal')">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Popularity Filter -->
                                    <div class="filter-group">
                                        <div class="collapse bg-base-200/50 rounded-lg">
                                            <input type="checkbox" class="collapse-toggle">
                                            <div class="collapse-title text-sm font-medium px-4 py-2 min-h-0">
                                                <span class="iconify" data-icon="heroicons:fire" data-width="16"></span>
                                                热度指标
                                            </div>
                                            <div class="collapse-content px-4 pb-4">
                                                <!-- 浏览次数筛选 -->
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:eye"
                                                            data-width="14"></span>
                                                        浏览次数
                                                    </h4>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最小浏览数</span><span
                                                                id="minViewCountValue"
                                                                class="label-text-alt text-xs">0</span></label>
                                                        <input type="range" min="0" max="30000" value="0"
                                                            id="minViewCountRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最大浏览数</span><span
                                                                id="maxViewCountValue"
                                                                class="label-text-alt text-xs">30000</span></label>
                                                        <input type="range" min="0" max="30000" value="30000"
                                                            id="maxViewCountRange" class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                </div>
                                                <!-- 下载次数筛选 -->
                                                <div class="mb-4">
                                                    <h4 class="text-sm font-medium mb-2 flex items-center gap-2">
                                                        <span class="iconify" data-icon="heroicons:arrow-down-tray"
                                                            data-width="14"></span>
                                                        下载次数
                                                    </h4>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最小下载数</span><span
                                                                id="minDownloadCountValue"
                                                                class="label-text-alt text-xs">0</span></label>
                                                        <input type="range" min="0" max="5000" value="0"
                                                            id="minDownloadCountRange"
                                                            class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                    <div class="form-control">
                                                        <label class="label py-1"><span
                                                                class="label-text text-xs">最大下载数</span><span
                                                                id="maxDownloadCountValue"
                                                                class="label-text-alt text-xs">5000</span></label>
                                                        <input type="range" min="0" max="5000" value="5000"
                                                            id="maxDownloadCountRange"
                                                            class="range range-primary range-xs"
                                                            oninput="updateSliderValue(this)">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Reset Button -->
                                    <div class="mt-4">
                                        <button class="btn btn-outline btn-sm w-full" onclick="resetFilters()">
                                            <span class="iconify" data-icon="heroicons:arrow-path"
                                                data-width="16"></span>
                                            重置筛选
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content -->
                    <div class="flex-1">
                        <!-- View Toggle and Result Count -->
                        <div class="flex justify-between items-center mb-6 results-toolbar">
                            <div class="flex gap-2">
                                <button data-view="recommended" class="btn btn-primary btn-sm view-toggle active"
                                    onclick="toggleView('recommended')">
                                    <span class="iconify" data-icon="heroicons:star" data-width="16"></span>推荐
                                </button>
                                <button data-view="popular" class="btn btn-ghost btn-sm view-toggle"
                                    onclick="toggleView('popular')">
                                    <span class="iconify" data-icon="heroicons:fire" data-width="16"></span>热门
                                </button>
                                <button data-view="latest" class="btn btn-ghost btn-sm view-toggle"
                                    onclick="toggleView('latest')">
                                    <span class="iconify" data-icon="heroicons:clock" data-width="16"></span>最新
                                </button>
                            </div>
                            <div id="resultCount" class="text-sm text-base-content/70">共找到 0 个图谱</div>
                        </div>

                        <!-- Graph Grid -->
                        <div id="graphGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 academic-grid">
                            <!-- Graphs will be loaded dynamically -->
                        </div>

                        <!-- Pagination -->
                        <div class="flex justify-center mt-8">
                            <div class="join">
                                <button class="join-item btn btn-sm">«</button>
                                <button class="join-item btn btn-sm btn-active">1</button>
                                <button class="join-item btn btn-sm">2</button>
                                <button class="join-item btn btn-sm">3</button>
                                <button class="join-item btn btn-sm">»</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <th:block layout:fragment="js">
        <script th:src="@{/js/graph-list.js}"></script>
    </th:block>
</body>

</html>