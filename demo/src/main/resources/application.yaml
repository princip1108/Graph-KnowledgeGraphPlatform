spring:
  application:
    name: graphwisdom
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB

  # MySQL 数据库配置
  datasource:
    url: jdbc:mysql://localhost:3306/graph_db?serverTimezone=UTC
    username: root
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
  # Neo4j 图数据库配置
  neo4j:
    uri: neo4j://localhost:7687
    authentication:
      username: neo4j
      password: ${NEO4J_PASSWORD}

  # GitHub OAuth2 登录配置
  security:
    oauth2:
      client:
        registration:
          github:
            client-id: ${GITHUB_CLIENT_ID}
            client-secret: ${GITHUB_CLIENT_SECRET}
            scope: read:user,user:email

  # Spring Mail 邮件服务配置（通过环境变量切换服务商，默认163邮箱）
  mail:
    host: ${MAIL_HOST:smtp.163.com}
    port: ${MAIL_PORT:465}
    username: ${MAIL_USERNAME}
    password: ${MAIL_AUTH_CODE}
    properties:
      mail:
        smtp:
          auth: true
          ssl:
            enable: ${MAIL_SSL:true}
          starttls:
            enable: ${MAIL_STARTTLS:false}

# 文件上传配置
app:
  upload:
    # 上传文件存储目录
    # 本地开发：使用相对路径 uploads（在项目运行目录下）
    # 服务器部署：通过环境变量 APP_UPLOAD_BASE_PATH 覆盖，如 /data/uploads
    base-path: ${APP_UPLOAD_BASE_PATH:uploads}